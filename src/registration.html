<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;700;900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./sass/main.scss" />
    <title>Registration page</title>
  </head>
  <body class="body-registration">
    <header class="header section header-quiz">
      <div class="header__container container">
        <div class="logo-link logo-link--header" href="./index.html">
          <svg class="logo">
            <use class="header__logo-svg" href="./images/symbol-defs.svg#icon-keto-icon"></use>
          </svg>
        </div>
      </div>
    </header>
    <main>
      <section class="section hero__section">
        <svg class="hero__mask-svg hero__mask-svg--card">
          <use href="./images/symbol-defs.svg#icon-head-mask"></use>
        </svg>
        <div class="hero__container container hero__container--reg">
          <div class="hero__heading-wrap">
            <div class="hero__heading-circle-wrap heading-circle">
              <div class="heading-circle--first"></div>
              <div class="heading-circle--second"></div>
              <div class="heading-circle--third"></div>
              <div class="heading-circle__content back">
                <svg class="heading__logo">
                  <use
                    class="heading__logo-svg"
                    href="./images/symbol-defs.svg#icon-emailfill"
                  ></use>
                </svg>
              </div>
            </div>
            <h1 class="hero__heading">
              Your personalized KETO DIET for your target weight is ready
            </h1>
          </div>
        </div>
      </section>
      <section class="section quiz__section reg__section">
        <div class="container reg-container quiz-container quiz-container--card">
          <form enctype="multipart/form-data" method="post" xw class="reg__form">
            <p class="reg__form-desc">
              Enter the e-mail address you want to receive your meal plan on:
            </p>
            <div class="measurements__form-input-wrap reg__form-input-wrap">
              <input
                class="measurements__form-input reg__form-input"
                type="email"
                id="email"
                required=""
                placeholder="Email"
                autocomplete="off"
              />
              <label class="measurements__form-label" for="email">Email</label>
              <span></span>
              <span class="measurements__form-bottom-line reg__form-input-bottom-line"></span>
              <div class="measurements__form-notification reg__form-input-notification"></div>
            </div>
            <div class="reg__form-checkbox-wrap">
              <label class="reg__form-checkbox-label" for="checkbox">
                <input
                  class="reg__form-checkbox visually-hidden"
                  type="checkbox"
                  id="checkbox"
                  required=""
                  checked
                />
                <span class="reg__form-checkbox-custom"></span>
                <span class="reg__form-checkbox-label-text"
                  >I agree with
                  <a class="reg__form-link" href="../src/conditions.html">
                    Terms and Conditions</a
                  ></span
                >
              </label>
            </div>
            <div class="reg__button-wrap">
              <button type="submit" class="reg__button">
                Continue<svg class="reg__button-icon">
                  <use href="./images/symbol-defs.svg#icon-next"></use>
                </svg>
              </button>
            </div>
          </form>
          <form
            enctype="multipart/form-data"
            method="post"
            id="form"
            onsubmit="send(event, 'send.php')"
          >
            <p>Имя</p>
            <input placeholder="Представьтесь" name="name" type="text" />
            <p>Email</p>
            <input placeholder="Укажите почту" name="email" type="text" />
            <p>Сообщение</p>
            <textarea name="text"></textarea>
            <p>Прикрепить файлы</p>
            <input type="file" name="myfile[]" multiple id="myfile" />
            <p><input value="Отправить" type="submit" /></p>
          </form>
        </div>
      </section>
    </main>
    <script src="./registration.js"></script>
    <script>
      // Отправка данных на сервер
      function send(event, php) {
        console.log('Отправка запроса');
        event.preventDefault ? event.preventDefault() : (event.returnValue = false);
        var req = new XMLHttpRequest();
        req.open('POST', php, true);
        req.onload = function () {
          if (req.status >= 200 && req.status < 400) {
            json = JSON.parse(this.response); // Ебанный internet explorer 11
            console.log(json);

            // ЗДЕСЬ УКАЗЫВАЕМ ДЕЙСТВИЯ В СЛУЧАЕ УСПЕХА ИЛИ НЕУДАЧИ
            if (json.result == 'success') {
              // Если сообщение отправлено
              alert('Сообщение отправлено');
            } else {
              // Если произошла ошибка
              alert('Ошибка. Сообщение не отправлено');
            }
            // Если не удалось связаться с php файлом
          } else {
            alert('Ошибка сервера. Номер: ' + req.status);
          }
        };

        // Если не удалось отправить запрос. Стоит блок на хостинге
        req.onerror = function () {
          alert('Ошибка отправки запроса');
        };
        req.send(new FormData(event.target));
      }
    </script>
  </body>
</html>
